<app-notes></app-notes>
<div [ngClass]="listview?'viewlist':' viewgrid'" cdkDropList (cdkDropListDropped)="drop($event)">   
    <mat-card [ngClass]="listview?'list':'grid'"  *ngFor="let note of notes; let noteindex=index"  [style.background-color]="colorPalette[note.color]['colorCode']" cdkDrag>
    <div *cdkDragPlaceholder>
      <div (click)="openDialog(note)" >
        <div>{{note.title}}</div>
        <div>{{note.description}}</div>        
      </div>
      <span style="display:flex;justify-content:flex-end;margin-top: -38px;" (click)="pin(noteindex,note.id)" *ngIf="note.isPin==0">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="36" viewBox="0 0 24 24">
            <path fill="none" d="M0 0h24v24H0z"/>
            <path fill="black" d="M17 4v7l2 3v2h-6v5l-1 1-1-1v-5H5v-2l2-3V4c0-1.1.9-2 2-2h6c1.11 0 2 .89 2 2zM9 4v7.75L7.5 14h9L15 11.75V4H9z"/>
     </svg>  
    </span> 
    <span style="display:flex;justify-content:flex-end;margin-top: -38px;" (click)="unpin(noteindex,note.id)" *ngIf="note.isPin==1">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="36" viewBox="0 0 24 24">
            <path fill="none" d="M0 0h24v24H0z"/>
            <path fill="#202124" d="M17 4a2 2 0 0 0-2-2H9c-1.1 0-2 .9-2 2v7l-2 3v2h6v5l1 1 1-1v-5h6v-2l-2-3V4z"/>
            </svg>
    </span>
    <div> <img  src="{{note.images}}" style="height : 127px;" ></div>
    <div *ngFor="let onelabel of allLabels" style="margin-right:auto;margin-top: 10px;">
      <mat-chip-list style="margin-bottom: -2px" class="mat-chip-list-stacked" *ngIf="onelabel.label && note.id==onelabel.noteId"
                aria-orientation=" vertical">
                <mat-chip matTooltip="{{onelabel.label}}">
                    {{onelabel.label}}
                    <mat-icon matChipRemove (click)="removeLabel(note.id)"> cancel</mat-icon>
                </mat-chip>
            </mat-chip-list>
        </div>
      <div style="margin-top: 30px;margin-bottom: -25px;">
        <button mat-icon-button [matMenuTriggerFor]="date">
          <mat-icon><img class="img" src="..\assets\addReminder.png" height="20px"></mat-icon>
        </button>
        <button mat-icon-button (click)="openCollaborator(note)">
          <mat-icon><img class="img" src="..\assets\collaborator.png" height="20px"></mat-icon>
        </button>
        <button mat-icon-button [matMenuTriggerFor]="color">
          <mat-icon><img class="img" src="..\assets\color.png" height="20px"></mat-icon>
        </button>
        <input style="display: none" type="file" (change)="onFileUpload($event,note.id)" #selectFile>  
        <button mat-icon-button (click)="selectFile.click()">
          <mat-icon><img class="img" src="..\assets\image.png" height="20px"></mat-icon>
        </button>
        <button mat-icon-button (click)="archive(note.id)">
          <mat-icon><img class="img" src="..\assets\archive.png" height="20px"></mat-icon>
        </button>
        <button mat-icon-button [matMenuTriggerFor]="more">
          <mat-icon><img class="img" src="..\assets\more.png" height="20px"></mat-icon>
        </button>
      </div>      
       
          <mat-menu #menu="matMenu">
            <div mat-menu-item>
              <button type="submit" mat-button (click)="Remove(note.id)">Delete</button>
            </div>
            <div mat-menu-item>
              <button type="submit" mat-button (click)="Restore(note.id)">Restore</button>
            </div>
          </mat-menu>
           
     
        <mat-menu #color="matMenu" style="margin-left:20px">
          <div class="colorpalette-card">
              <div *ngFor="let colr of colorPalette; let name = index">
                
                  <button mat-icon-button [style.background-color]="colr.colorCode" 
                  
                      (click)="updatecolor(name, note.id)">
                  </button>
              </div>
          </div>
      </mat-menu>
      
  
        <mat-menu #date="matMenu">
          <span style="margin-left:20px">Reminder</span>
          <span style="margin-left:100%"></span>
          <div mat-menu-item>
            <mat-icon>alarm_add</mat-icon>
            <mat-form-field class="demo-full-width">
              <input matInput [owlDateTime]="dt1" [owlDateTimeTrigger]="dt1" [(ngModel)]="adddate" autocomplete="off"
                placeholder="Choose date and time">
              <owl-date-time #dt1></owl-date-time>
            </mat-form-field>
          </div>
          <button mat-button style="margin-left:185px" (click)="reminder(note.id)">save</button>
        </mat-menu>
      
      
        <mat-menu style="margin-top: 54px;" #more="matMenu">
          <div mat-menu-item>Note ID -
            <span>{{note.id}}</span>
          </div>
          <button mat-menu-item (click)="delete(note.id)">
            <span>Delete Note</span>
          </button>
          <button mat-menu-item [matMenuTriggerFor]="lab" (click)="stopPropagation($event)">
            <span>Add Label</span>
          </button>
        </mat-menu>     
        <mat-menu #lab="matMenu">
            <div  *ngFor="let onelabel of labels"  (click)="stopPropagation($event)">      
                <mat-checkbox (click)="notesLabel(note.id,onelabel.id,onelabel.label)">{{onelabel.label}}</mat-checkbox>
             </div>
          </mat-menu>
        </div>   
    </mat-card>
  </div>